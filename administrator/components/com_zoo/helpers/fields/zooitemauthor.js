/* Copyright (C) YOOtheme GmbH, https://www.gnu.org/licenses/gpl.html GNU/GPL */

jQuery(function(r){r(".field-user-wrapper").each(l);function l(){var t=r(this),a=t.find(t.data("modal"))[0],n=a.querySelector(".modal-body"),u=t.data("url"),c=t.data("modal-width"),m=t.data("modal-height"),d=t.find(t.data("input")),s=t.find(t.data("input-name"));Joomla.initialiseModal(a,{isJoomla:!0}),t.on("click",t.data("button-select"),function(){f()}),a.addEventListener("hide",function(){o()});function f(){o(n);const e=document.createElement("iframe");e.setAttribute("name","field-user-modal"),e.src=u.replace("{field-user-id}",d.attr("id")),e.setAttribute("width",c),e.setAttribute("height",m),n.appendChild(e),a.open();var i=n.querySelector("iframe");i.addEventListener("load",function(){const p=i.contentWindow.document;[].slice.call(p.querySelectorAll(".button-select")).forEach(function(g){g.addEventListener("click",v)})})}function v(e){b(e.target.getAttribute("data-user-value"),e.target.getAttribute("data-user-name")),h()}function h(){a.close(),o()}function o(){n.innerHTML=""}function b(e,i){d.attr("value",e),s.attr("value",i||e)}}});
