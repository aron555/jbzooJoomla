/* Copyright (C) YOOtheme GmbH, https://www.gnu.org/licenses/gpl.html GNU/GPL */

(function(t){var a=function(){};t.extend(a.prototype,{name:"Comment",options:{cookiePrefix:"zoo-comment_",cookieLifetime:15552e3,msgCancel:"Cancel"},initialize:function(i,o){this.options=t.extend({},this.options,o);var n=this,e=i.find("#respond"),r=i.find("#edit");e.find("a.facebook-connect").on("click",function(){n.setLoginCookie("facebook")}),e.find("a.facebook-logout").on("click",function(){n.setLoginCookie("")}),e.find("a.twitter-connect").on("click",function(){n.setLoginCookie("twitter")}),e.find("a.twitter-logout").on("click",function(){n.setLoginCookie("")}),e.find("input:text").placeholder(),r.find(".comment-cancelEdit").on("click",function(c){c.preventDefault(),r.hide(),r.appendTo(t("#comments")),r.find("input[name=comment_id]").val(0),r.find("textarea[name=content]").val("")}),i.find(".comment").each(function(){var c=t(this);c.find(".reply").on("click",function(s){s.preventDefault(),r.hide(),e.find(".comment-cancelReply").remove(),t("<a>"+n.options.msgCancel+"</a>").addClass("comment-cancelReply").attr("href","#respond").on("click",function(p){p.preventDefault(),e.find(".comment-cancelReply").remove(),e.appendTo(t("#comments")),e.find("input[name=parent_id]").val(0)}).appendTo(e.find(".actions")),e.appendTo(c),e.find("input[name=parent_id]").val(t(this).closest(".comment").attr("id").replace(/comment-/i,""))}),c.find(".edit").on("click",function(s){s.preventDefault(),e.find(".comment-cancelReply").remove(),e.appendTo(t("#comments")),e.find("input[name=parent_id]").val(0),r.appendTo(c),r.find("input[name=comment_id]").val(t(this).closest(".comment").attr("id").replace(/comment-/i,"")),r.find("textarea[name=content]").val(t(this).closest(".comment").find(".content").html()),r.show()})})},setLoginCookie:function(i){t.cookie(this.options.cookiePrefix+"login",i,{expires:this.options.cookieLifetime/(60*60*24),path:"/"})}}),t.fn[a.prototype.name]=function(){var i=arguments,o=i[0]?i[0]:null;return this.each(function(){var n=t(this);if(a.prototype[o]&&n.data(a.prototype.name)&&o!="initialize")n.data(a.prototype.name)[o].apply(n.data(a.prototype.name),Array.prototype.slice.call(i,1));else if(!o||t.isPlainObject(o)){var e=new a;a.prototype.initialize&&e.initialize.apply(e,t.merge([n],i)),n.data(a.prototype.name,e)}else t.error("Method "+o+" does not exist on jQuery."+a.name)})}})(jQuery),function(t){var a=function(){};t.extend(a.prototype,{name:"BrowseComments",options:{url:"index.php?option=com_zoo&controller=comment",id:"edit-comment-editor"},initialize:function(i,o){this.options=t.extend({},this.options,o);var n=this;this.form=i,i.on("click","tr.comment-row .actions-links .edit, tr.comment-row .actions-links .reply",function(e){e.preventDefault();var r=t(this).attr("class");n.modifyEvent(t(this).closest("tr.comment-row"),r)}),i.on("click","tr.comment-row .actions-links span",function(e){switch(e.preventDefault(),t(this).attr("class")){case"no-spam":var r="approve";break;case"delete":var r="remove";break;default:var r=t(this).attr("class");break}n.stateEvent(t(this).closest("tr.comment-row"),r)})},modifyEvent:function(i,o){var n=this;t.ajax({url:this.options.url,data:{task:o,format:"raw",cid:i.find('input[name^="cid["]').val()},success:function(e){n.removeEditor(),n.insertEditor(i,e),o=="edit"&&i.hide(),n.form.unbind("save").unbind("cancel").on("save",function(r,c){n.removeEditor(),o=="edit"?i.replaceWith(c):t(c).insertAfter(i),n.stripe()}).on("cancel",function(){n.removeEditor()})}})},stateEvent:function(i,o){t('<input type="hidden" name="cid">').val(i.find('input[name^="cid["]').val()).appendTo(this.form),this.form.find("input[name=task]").val(o),this.form.submit()},insertEditor:function(i,o){var n=this,e=i.after(o).next();e.find(".actions .save").on("click",function(r){r.preventDefault();var c={};t.each(n.form.serializeArray(),function(s,p){c[p.name]=p.value}),t.ajax({type:"POST",url:n.options.url,data:t.extend(c,{task:"save",format:"raw"}),success:function(s){n.form.triggerHandler("save",s)}})}),e.find(".actions .cancel").on("click",function(r){r.preventDefault(),n.form.triggerHandler("cancel")}),e.find(".content textarea").focus()},removeEditor:function(){t("#"+this.options.id,this.form).prev("tr").show(),t("#"+this.options.id,this.form).remove()},stripe:function(){t("table.stripe tbody tr").removeClass("odd even").each(function(){t(this).addClass(t(this).is("tr:odd")?"odd":"even")})}}),t.fn[a.prototype.name]=function(){var i=arguments,o=i[0]?i[0]:null;return this.each(function(){var n=t(this);if(a.prototype[o]&&n.data(a.prototype.name)&&o!="initialize")n.data(a.prototype.name)[o].apply(n.data(a.prototype.name),Array.prototype.slice.call(i,1));else if(!o||t.isPlainObject(o)){var e=new a;a.prototype.initialize&&e.initialize.apply(e,t.merge([n],i)),n.data(a.prototype.name,e)}else t.error("Method "+o+" does not exist on jQuery."+a.name)})}}(jQuery);
