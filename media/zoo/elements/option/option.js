/* Copyright (C) YOOtheme GmbH, https://www.gnu.org/licenses/gpl.html GNU/GPL */

(function(t){var e=function(){};t.extend(e.prototype,{name:"ElementSelect",options:{element:null,variable:null},initialize:function(n,a){this.options=t.extend({},this.options,a);var i=this;this.element=n,this.list=n.children("ul"),this.hidden=this.list.find("li.hidden").detach(),n.on("click","div.delete",function(){t(this).parent("li").slideUp(400,function(){t(this).remove(),i.orderOptions()})}).on("change","div.name-input input",function(){var o=t(this).closest("li"),r=o.find("div.value-input input");t(this).val()!=""&&r.val()==""&&r.val(t(this).val())}).find("div.add").bind("click",function(){i.hidden.clone().removeClass("hidden").appendTo(i.list).slideDown(200).effect("highlight",{},1e3).find("input:first").focus(),i.orderOptions()}),this.list.sortable({handle:"div.sort-handle",containment:this.list.parent().parent(),placeholder:"dragging",axis:"y",opacity:1,revert:75,delay:100,tolerance:"pointer",zIndex:99,start:function(o,r){r.placeholder.height(r.helper.height()),i.list.sortable("refreshPositions")},stop:function(o,r){i.orderOptions()}})},orderOptions:function(){var n=/^(\S+\[option\])\[\d+\](\[name\]|\[value\])$/;this.list.children("li").each(function(a){t(this).find("input").each(function(){t(this).attr("name")&&t(this).attr("name",t(this).attr("name").replace(n,"$1["+a+"]$2"))})})}}),t.fn[e.prototype.name]=function(){var n=arguments,a=n[0]?n[0]:null;return this.each(function(){var i=t(this);if(e.prototype[a]&&i.data(e.prototype.name)&&a!="initialize")i.data(e.prototype.name)[a].apply(i.data(e.prototype.name),Array.prototype.slice.call(n,1));else if(!a||t.isPlainObject(a)){var o=new e;e.prototype.initialize&&o.initialize.apply(o,t.merge([i],n)),i.data(e.prototype.name,o)}else t.error("Method "+a+" does not exist on jQuery."+e.name)})}})(jQuery);
